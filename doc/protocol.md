# Протокол общения с устройством

## Общее описание

Протокол основывается на modbus c усиченной адресацией и проверкой CRC.

| Команда | Данные     |
| ------- | ---------- |
| 1 байт  | до 19 байт |

В зависимости от команды меняется формат данных (аргументов)

В Сумме комманда не должна привышать 20 байт

Номер команды может быть от 0 до 0x7f. Верхний бит команды указывает что это ответ на команду.

Пример:

Команда 0x10 - Ответ 0x90

## Команды

Команды с номером меньше 0x10 зарезервированы

| Номер | Название | Формат запроса                                               | Формат ответа          | Описание                                                                 |
| ----- | -------- | ------------------------------------------------------------ | ---------------------- | ------------------------------------------------------------------------ |
| 0x10  | INT_RD   | uint32_t - Номер переменной                                  | uint32_t - Значение    | Чтение переменной, если номера не существует будет возвращено 0xffffffff |
| 0x11  | INT_WR   | [ uint32_t, uint32_t ] - [ Номер переменной, Значение ]      | 0 - ОК, >0 - ошибка    | Запись переменной                                                        |
| 0x12  | BLOB_RD  | int24_t - 3 байта адреса                                     | uint8_t[16] - Значение | Чтение памяти (файла), если адреса за границей памяти - то все = 0       |
| 0x12  | BLOB_WR  | [ int24_t, uint8_t[16] ] - [3 байта адреса, 16 байт данных ] | 0 - OK, >0 - Ошибка    | Запись памяти (файла)                                                    |


## Описание кода



